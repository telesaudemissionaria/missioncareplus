<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!-- <base href="./"> Removido para corrigir o erro de registro do Service Worker em alguns ambientes -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MissionCare Plus - Cuidado Integral para Missionários</title>
  <!-- PWA Manifest e Tema -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#3b82f6" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <!-- Fontes e Tailwind -->
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?display=swap&family=Lexend:wght@400;500;700;900&family=Noto+Sans:wght@400;500;700;900" />
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root {
      --primary: #3b82f6; --primary-dark: #2563eb; --secondary: #8b5cf6;
      --accent: #ec4899; --success: #10b981; --warning: #f59e0b;
      --danger: #ef4444; --light: #f9fafb; --dark: #1f2937;
    }
    body { font-family: 'Lexend','Noto Sans',sans-serif; background:var(--light); color:var(--dark); }
    .lang-btn{padding:.25rem .75rem;border-radius:9999px;font-size:1.25rem;font-weight:700;cursor:pointer;transition:.2s}
    .lang-btn.active{background:var(--primary);color:#fff; box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);}
    .lang-btn.inactive{background:#e5e7eb;color:#4b5563}
    .lang-btn:hover{transform:scale(1.05)}
    .action-card{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background:#fff;border-radius:1.25rem;box-shadow:0 4px 15px -1px rgba(0,0,0,.1),0 2px 8px -2px rgba(0,0,0,.05);padding:1.75rem;transition:.3s;border:1px solid rgba(229,231,235,.8);min-height:200px;position:relative;overflow:hidden}
    .action-card::before{content:'';position:absolute;top:0;left:0;width:100%;height:5px;transform:scaleX(0);transform-origin:left;transition:transform .3s}
    .action-card.adult::before { background: linear-gradient(90deg, #3b82f6, #60a5fa); }
    .action-card.pediatric::before { background: linear-gradient(90deg, #ec4899, #f9a8d4); }
    .action-card.gob::before { background: linear-gradient(90deg, #8b5cf6, #c4b5fd); }
    .action-card.meds::before { background: linear-gradient(90deg, #10b981, #6ee7b7); }
    .action-card:hover::before{transform:scaleX(1)}
    .action-card:hover{transform:translateY(-8px);box-shadow:0 15px 25px -5px rgba(0,0,0,.15),0 8px 10px -6px rgba(0,0,0,.1)}
    .emergency-card{background:linear-gradient(135deg,var(--danger),#b91c1c);color:#fff}
    .emergency-card:hover{background:linear-gradient(135deg,#b91c1c,#991b1b)}
    .offline-badge{position:absolute;top:10px;right:10px;background:var(--warning);color:#fff;font-size:10px;font-weight:bold;padding:2px 8px;border-radius:10px;text-transform:uppercase}
    .action-card:focus,.nav-item:focus{outline:3px solid var(--primary);outline-offset:2px}
    @media (prefers-contrast: high){ .action-card{border:2px solid var(--dark)} .bg-blue-600{background:#1e40af} }
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    .fade-in{animation:fadeIn .6s ease-out forwards}
    .hero-image { object-fit: cover; object-position: center; }
    @media (max-width:768px){.hero-section{padding:1.5rem}.action-card{min-height:160px;padding:1.25rem}}
  </style>
</head>
<body>
  <!-- Modais -->
  <div id="emergency-alert-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[60]">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-lg p-6 md:p-8">
      <div class="flex items-start gap-4">
        <div class="flex-shrink-0 size-12 bg-red-100 rounded-full flex items-center justify-center">
          <svg class="w-7 h-7 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
          </svg>
        </div>
        <div class="flex-grow">
          <h2 class="text-xl font-bold text-gray-800 mb-2" data-i18n="emergencyAlertTitle">Aviso Importante</h2>
          <p class="text-gray-600" data-i18n="emergencyAlertText">
            Se você estiver apresentando <a href="sintomas-graves.html" class="font-bold text-red-600 underline hover:text-red-700">SINTOMAS GRAVES</a>, não use o MissionCare Plus. Em vez disso, entre em contato com os serviços de emergência.
          </p>
        </div>
      </div>
      <button id="close-emergency-alert" class="mt-6 w-full py-3 rounded-full text-lg font-bold text-white bg-gray-700 hover:bg-gray-800">Entendi</button>
    </div>
  </div>
  <div id="disclaimer-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-lg p-6 md:p-8 max-h-[90vh] overflow-y-auto">
      <h2 class="text-xl font-bold text-red-700 mb-4 flex items-center" data-i18n="disclaimerTitle">
        <svg class="w-6 h-6 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
        </svg>
        AVISO DE RESPONSABILIDADE
      </h2>
      <div class="text-sm text-gray-600 space-y-3">
        <p data-i18n="disclaimerP1">O MissionCare Plus é uma ferramenta de apoio educacional. As informações aqui contidas <strong>não substituem</strong> uma consulta médica.</p>
        <p data-i18n="disclaimerP2">Em caso de emergência, procure ajuda médica imediatamente.</p>
      </div>
      <button id="accept-disclaimer" class="mt-6 w-full py-3 rounded-full text-lg font-bold text-white bg-blue-600 hover:bg-blue-700">Entendi e Aceito</button>
    </div>
  </div>
  <!-- App -->
  <div id="app-container" class="max-w-4xl mx-auto">
    <header class="hero-section p-4 md:p-6 relative">
      <div id="language-selector" class="absolute top-4 right-4 flex space-x-2 bg-white/80 backdrop-blur-sm p-1 rounded-full z-10 shadow-md">
        <button id="lang-pt" class="lang-btn" aria-label="Português">
          <svg width="20" height="14" viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect width="20" height="14" fill="#009c3b"/>
            <polygon points="10,2 16,7 10,12 4,7" fill="#ffdf00"/>
            <circle cx="10" cy="7" r="2.6" fill="#3e4095"/>
          </svg>
        </button>
        <button id="lang-en" class="lang-btn" aria-label="English">
          <svg width="20" height="14" viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect width="20" height="14" fill="#b22234"/>
            <g fill="#fff">
              <rect y="1" width="20" height="1.5"/>
              <rect y="4" width="20" height="1.5"/>
              <rect y="7" width="20" height="1.5"/>
              <rect y="10" width="20" height="1.5"/>
            </g>
            <rect width="8" height="6" fill="#3c3b6e"/>
          </svg>
        </button>
        <button id="lang-es" class="lang-btn" aria-label="Español">
          <svg width="20" height="14" viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect width="20" height="14" fill="#c60b1e"/>
            <rect y="4" width="20" height="6" fill="#ffc400"/>
          </svg>
        </button>
      </div>
        <!-- Cabeçalho simplificado -->
      <div class="pt-16 pb-8 text-center">
        <h1 class="text-4xl md:text-5xl font-bold text-blue-600" data-i18n="mainTitle">MissionCare Plus</h1>
        <p class="text-lg text-gray-500 mt-2" data-i18n="subtitle">"Levando cura e esperança aos confins da Terra"</p>
      </div>
    </header>
    <!-- Adicionado padding-bottom para não sobrepor o conteúdo com a nova barra de navegação -->
    <main class="px-4 md:px-6 pb-24">
      <!-- Ações Críticas -->
      <section>
        <h2 class="text-xl font-bold text-gray-800 mb-4 border-l-4 border-red-500 pl-3" data-i18n="criticalActions">Ações Críticas</h2>
        <div class="grid grid-cols-1 gap-5">
          <a href="4-emergencias.html" class="action-card emergency-card">
            <div class="offline-badge hidden" id="emergency-offline-badge">Offline</div>
            <div class="mb-3">
              <svg class="w-12 h-12" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
              </svg>
            </div>
            <h3 class="font-bold uppercase" data-i18n="emergenciesTitle">Guia de Emergências</h3>
            <p class="text-sm text-red-100 mt-1" data-i18n="emergenciesDesc">Primeiros socorros e orientação rápida.</p>
            <div class="mt-2 text-xs text-red-200">
              <span class="online-content" data-i18n="onlineContent">Conteúdo atualizado disponível online</span>
              <span class="offline-content hidden" data-i18n="offlineContent">Versão básica offline disponível</span>
            </div>
          </a>
        </div>
      </section>
      
      <!-- Atenção Principal e Ferramentas -->
      <section class="mt-10">
        <h2 class="text-xl font-bold text-gray-800 mb-4" data-i18n="mainAttention">Atenção Principal</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-5">
          <!-- Card Adultos com novo ícone e cor -->
          <a href="3-triagem-adulto.html" class="action-card adult">
            <div class="offline-badge hidden" id="adult-triage-offline-badge">Offline</div>
            <div class="mb-4 p-4 bg-blue-100 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-blue-600">
                <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
            </div>
            <h3 class="font-bold text-gray-800" data-i18n="adultsTitle">ATENÇÃO ADULTOS</h3>
            <p class="text-sm text-gray-500 mt-1" data-i18n="adultsDesc">Avalie sintomas e receba orientação.</p>
          </a>
          <!-- Card Pediatria com novo ícone e cor -->
          <a href="3b-triagem-pediatria.html" class="action-card pediatric">
            <div class="offline-badge hidden" id="pediatric-triage-offline-badge">Offline</div>
            <div class="mb-4 p-4 bg-pink-100 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-pink-600">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9 9.75h.008v.008H9V9.75zm6 0h.008v.008H15V9.75z" />
              </svg>
            </div>
            <h3 class="font-bold text-gray-800" data-i18n="pediatricsTitle">ATENÇÃO PEDIATRIA</h3>
            <p class="text-sm text-gray-500 mt-1" data-i18n="pediatricsDesc">Cuidado especializado para crianças.</p>
          </a>
          <!-- Card GOB com novo nome, ícone e cor -->
          <a href="3c-assistente-gob.html" class="action-card gob">
            <div class="offline-badge hidden" id="gob-triage-offline-badge">Offline</div>
            <div class="mb-4 p-4 bg-purple-100 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-purple-600">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
              </svg>
            </div>
            <h3 class="font-bold text-gray-800" data-i18n="gobTitle">ATENÇÃO OBSTETRÍCIA</h3>
            <p class="text-sm text-gray-500 mt-1" data-i18n="gobDesc">Triagem e suporte para Ginecologia e Obstetrícia.</p>
          </a>
          <!-- Card Medicamentos com novo ícone e cor -->
          <a href="8-medicamentos.html" class="action-card meds">
            <div class="offline-badge hidden" id="medications-offline-badge">Offline</div>
            <div class="mb-4 p-4 bg-green-100 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-green-600">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h3 class="font-bold text-gray-800" data-i18n="meds">MEDICAMENTOS</h3>
          </a>
        </div>
      </section>
    </main>
  </div>
  
  <!-- INÍCIO: Barra de Navegação Inferior Adicionada -->
  <footer class="fixed bottom-0 left-0 right-0 bg-white shadow-[0_-2px_10px_rgba(0,0,0,0.1)] z-40">
    <nav class="flex justify-around max-w-4xl mx-auto">
      <a href="index.html" class="nav-item flex flex-col items-center justify-center text-center text-blue-600 p-2 w-1/3 transition-colors hover:bg-blue-50">
        <i class="fas fa-home text-xl mb-1"></i>
        <span class="text-xs font-medium" data-i18n="navHome">Início</span>
      </a>
      <a href="4-emergencias.html" class="nav-item flex flex-col items-center justify-center text-center text-gray-600 p-2 w-1/3 transition-colors hover:bg-gray-100">
        <i class="fas fa-kit-medical text-xl mb-1"></i>
        <span class="text-xs font-medium" data-i18n="navEmergencies">Emergências</span>
      </a>
      <a href="9-contatos.html" class="nav-item flex flex-col items-center justify-center text-center text-gray-600 p-2 w-1/3 transition-colors hover:bg-gray-100">
        <i class="fas fa-headset text-xl mb-1"></i>
        <span class="text-xs font-medium" data-i18n="navContact">Contato</span>
      </a>
    </nav>
  </footer>
  <!-- FIM: Barra de Navegação Inferior Adicionada -->
  
  <script>
    const translations = {
      pt: { emergencyAlertTitle:"Aviso Importante", emergencyAlertText:"Se você estiver apresentando <a href='sintomas-graves.html' class='font-bold text-red-600 underline hover:text-red-700'>SINTOMAS GRAVES</a>, não use o MissionCare Plus. Em vez disso, entre em contato com os serviços de emergência.", disclaimerTitle:"AVISO DE RESPONSABILIDADE", disclaimerP1:"O MissionCare Plus é uma ferramenta de apoio educacional. As informações aqui contidas <strong>não substituem</strong> uma consulta médica.", disclaimerP2:"Em caso de emergência, procure ajuda médica imediatamente.", mainTitle:"MissionCare Plus", subtitle:"\"Levando cura e esperança aos confins da Terra\"", criticalActions:"Ações Críticas", emergenciesTitle:"Guia de Emergências", emergenciesDesc:"Primeiros socorros e orientação rápida.", mainAttention:"Atenção Principal e Ferramentas", adultsTitle:"ATENÇÃO ADULTOS", adultsDesc:"Avalie sintomas e receba orientação.", pediatricsTitle:"ATENÇÃO PEDIATRIA", pediatricsDesc:"Cuidado especializado para crianças.", gobTitle: "ATENÇÃO OBSTETRÍCIA", gobDesc: "Triagem e suporte para Ginecologia e Obstetrícia.", meds:"MEDICAMENTOS", onlineContent:"Conteúdo atualizado disponível online", offlineContent:"Versão básica offline disponível", navHome:"Início", navEmergencies:"Emergências", navContact:"Contato" },
      es: { emergencyAlertTitle:"Aviso Importante", emergencyAlertText:"Si está presentando <a href='sintomas-graves.html' class='font-bold text-red-600 underline hover:text-red-700'>SÍNTOMAS GRAVES</a>, no use MissionCare Plus. En su lugar, contacte a los servicios de emergencia.", disclaimerTitle:"AVISO DE RESPONSABILIDAD", disclaimerP1:"MissionCare Plus es una herramienta de apoyo educativo. La información aquí contenida <strong>no reemplaza</strong> una consulta médica.", disclaimerP2:"En caso de emergencia, busque ayuda médica de inmediato.", mainTitle:"MissionCare Plus", subtitle:"\"Llevando sanación y esperanza hasta los confines de la Tierra\"", criticalActions:"Acciones Críticas", emergenciesTitle:"Guía de Emergencias", emergenciesDesc:"Primeros auxilios y orientación rápida.", mainAttention:"Atención Principal y Herramientas", adultsTitle:"ATENCIÓN ADULTOS", adultsDesc:"Evalúe síntomas y reciba orientación.", pediatricsTitle:"ATENCIÓN PEDIATRIA", pediatricsDesc:"Cuidado especializado para niños.", gobTitle: "ATENCIÓN OBSTETRICIA", gobDesc: "Triaje y soporte para Ginecología y Obstetricia.", meds:"MEDICAMENTOS", onlineContent:"Contenido actualizado disponible en línea", offlineContent:"Versão básica sin conexión disponible", navHome:"Inicio", navEmergencies:"Emergencias", navContact:"Contacto" },
      en: { emergencyAlertTitle:"Important Notice", emergencyAlertText:"If you are experiencing <a href='sintomas-graves.html' class='font-bold text-red-600 underline hover:text-red-700'>SEVERE SYMPTOMS</a>, do not use MissionCare Plus. Instead, contact emergency services.", disclaimerTitle:"DISCLAIMER", disclaimerP1:"MissionCare Plus is an educational support tool. The information herein <strong>does not replace</strong> a medical consultation.", disclaimerP2:"In case of emergency, seek medical help immediately.", mainTitle:"MissionCare Plus", subtitle:"\"Bringing healing and hope to the ends of the Earth\"", criticalActions:"Critical Actions", emergenciesTitle:"Emergency Guide", emergenciesDesc:"First aid and quick guidance.", mainAttention:"Main Care and Tools", adultsTitle:"ADULT CARE", adultsDesc:"Evaluate symptoms and receive guidance.", pediatricsTitle:"PEDIATRIC CARE", pediatricsDesc:"Specialized care for children.", gobTitle: "OBSTETRIC CARE", gobDesc: "Triage and support for Gynecology & Obstetrics.", meds:"MEDICATIONS", onlineContent:"Updated content available online", offlineContent:"Basic offline version available", navHome:"Home", navEmergencies:"Emergencies", navContact:"Contact" }
    };
    let currentLang = localStorage.getItem('lang') || 'pt';
    function updateContent(dict) {
      const d = dict || translations[currentLang];
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (d && d[key]) el.innerHTML = d[key];
      });
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.id === `lang-${currentLang}`);
        btn.classList.toggle('inactive', btn.id !== `lang-${currentLang}`);
      });
    }
    function debounce(fn, wait){ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a), wait); }; }
    function updateConnectionStatus() {
      const isOnline = navigator.onLine;
      document.querySelectorAll('.online-content').forEach(el => el.classList.toggle('hidden', !isOnline));
      document.querySelectorAll('.offline-content').forEach(el => el.classList.toggle('hidden', isOnline));
      document.querySelectorAll('.offline-badge').forEach(badge => badge.classList.toggle('hidden', isOnline));
    }
    document.addEventListener('DOMContentLoaded', () => {
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js').catch(err => console.error('SW reg failed:', err));
      }
      
      updateConnectionStatus();
      window.addEventListener('online', updateConnectionStatus);
      window.addEventListener('offline', updateConnectionStatus);

      const langBtns = document.querySelectorAll('.lang-btn');
      langBtns.forEach(btn => {
        btn.addEventListener('click', debounce(() => {
          currentLang = btn.id.split('-')[1];
          localStorage.setItem('lang', currentLang);
          updateContent();
        }, 200));
      });
      updateContent();
      const emergencyModal = document.getElementById('emergency-alert-modal');
      const closeEmergencyBtn = document.getElementById('close-emergency-alert');
      const disclaimerModal = document.getElementById('disclaimer-modal');
      const acceptDisclaimerBtn = document.getElementById('accept-disclaimer');
      const showDisclaimerIfNeeded = () => {
        if (!localStorage.getItem('disclaimerAccepted')) { disclaimerModal.classList.remove('hidden'); }
      };
      const showEmergencyIfNeeded = () => {
        if (!sessionStorage.getItem('emergencyDismissed')) { emergencyModal.classList.remove('hidden'); }
        else { showDisclaimerIfNeeded(); }
      };
      showEmergencyIfNeeded();
      closeEmergencyBtn?.addEventListener('click', () => {
        emergencyModal.classList.add('hidden');
        sessionStorage.setItem('emergencyDismissed','true');
        showDisclaimerIfNeeded();
      });
      acceptDisclaimerBtn?.addEventListener('click', () => {
        disclaimerModal.classList.add('hidden');
        localStorage.setItem('disclaimerAccepted','true');
      });
    });
  </script>
</body>
</html>
